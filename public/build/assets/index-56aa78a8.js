import{q as v,r as g,W as w,j as e,y as C}from"./app-12c34c07.js";import{I as _}from"./appLayout-5bd55cbb.js";import F from"./cardItem-654d8b81.js";import{S as O}from"./sweetalert2.esm.all-adb41881.js";import"./icon-ab199ae5.js";import"./IconCheck-77384f03.js";import"./index-abed5f29.js";import"./logo_eagle_media_informatika-285b6851.js";import"./XMarkIcon-333ae978.js";import"./index-036c2168.js";import"./label-294bd713.js";import"./dialog-c2f66023.js";import"./floating-ui.react-dom-8a98964c.js";import"./TrashIcon-ab07b4a6.js";function S(l,{initialItems:p}){const{errors:t,auth:I}=v().props,[s,b]=g.useState(!1),c=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(r),h=l.cart.cart_items,[o,f]=g.useState(h||p);g.useEffect(()=>{JSON.stringify(o)},[o]);const k=(r,n)=>{const y=o.map(m=>m.id===r?{...m,quantity:n}:m);f(y)},j=`(${l.ppn.ppn_name})`,i=o.reduce((r,n)=>r+n.quantity*n.price,0),u=l.ppn.ppn_nominal*i,x=i+u,{data:a,setData:d,post:D}=w({first_name:"",last_name:"",email:"",company:"",address:"",city:"",country:"",postal_code:"",phone:""}),N=r=>{r.preventDefault(),O.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Confirm!"}).then(n=>{n.isConfirmed?C.post(route("cart.buy",l.cart.id),{first_name:a.first_name,last_name:a.last_name,email:a.email,company:a.company,address:a.address,city:a.city,country:a.country,postal_code:a.postal_code,phone:a.phone,ppn:u,items:o,subTotal:x},{onFinish:y=>{b(!1)}}):b(!1)})};return e.jsx("main",{className:"mx-auto max-w-7xl px-4 pb-24 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"mx-auto max-w-2xl lg:max-w-none",children:[e.jsx("h1",{className:"text-lg font-medium text-gray-900",children:"Checkout"}),e.jsxs("form",{onSubmit:N,className:"lg:grid lg:grid-cols-2 lg:gap-x-12 xl:gap-x-16",children:[e.jsx("div",{children:e.jsxs("div",{className:"border-t border-gray-200 pt-10",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Shipping information"}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first-name",className:"block text-sm font-medium text-gray-700",children:"First Name"}),s?e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"first-name",type:"text",readOnly:!0,value:a.first_name,onChange:r=>d("first_name",r.target.value),autoComplete:"first-name",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}):e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"first-name",type:"text",placeholder:"First Name",value:a.first_name,onChange:r=>d("first_name",r.target.value),autoComplete:"first-name",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}),t.first_name&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:t.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last-name",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),s?e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"last-name",type:"text",readOnly:!0,value:a.last_name,onChange:r=>d("last_name",r.target.value),autoComplete:"first-name",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}):e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"last-name",type:"text",placeholder:"Last Name",value:a.last_name,onChange:r=>d("last_name",r.target.value),autoComplete:"first-name",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}),t.last_name&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:t.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),s?e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",type:"email",readOnly:!0,value:a.email,onChange:r=>d("email",r.target.value),autoComplete:"email",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}):e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"email",type:"email",placeholder:"Email",value:a.email,onChange:r=>d("email",r.target.value),autoComplete:"email",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}),t.email&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700",children:"Company"}),s?e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"company",type:"text",readOnly:!0,value:a.company,onChange:r=>d("company",r.target.value),autoComplete:"company",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}):e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"company",type:"text",placeholder:"Company",value:a.company,onChange:r=>d("company",r.target.value),autoComplete:"company",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}),t.company&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:t.company})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),s?e.jsx("div",{className:"mt-1",children:e.jsx("textarea",{readOnly:!0,value:a.address,onChange:r=>d("address",r.target.value),className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",id:""})}):e.jsx("div",{className:"mt-1",children:e.jsx("textarea",{value:a.address,onChange:r=>d("address",r.target.value),className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",id:""})}),t.address&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:t.address})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City"}),s?e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"city",type:"text",readOnly:!0,value:a.city,onChange:r=>d("city",r.target.value),autoComplete:"city",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}):e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"city",type:"text",placeholder:"City",value:a.city,onChange:r=>d("city",r.target.value),autoComplete:"city",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}),t.city&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:t.company})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700",children:"Country"}),s?e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"country",type:"text",readOnly:!0,value:a.country,onChange:r=>d("country",r.target.value),autoComplete:"country",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}):e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"country",type:"text",placeholder:"Country",value:a.country,onChange:r=>d("country",r.target.value),autoComplete:"country",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}),t.country&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:t.country})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),s?e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"postal_code",type:"number",readOnly:!0,value:a.postal_code,onChange:r=>d("postal_code",r.target.value),autoComplete:"postal_code",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}):e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"postal_code",type:"number",placeholder:"Postal Code",value:a.postal_code,onChange:r=>d("postal_code",r.target.value),autoComplete:"postal_code",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}),t.postal_code&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:t.postal_code})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),s?e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"phone",type:"number",readOnly:!0,value:a.phone,onChange:r=>d("phone",r.target.value),autoComplete:"phone",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}):e.jsx("div",{className:"mt-1",children:e.jsx("input",{id:"phone",type:"number",placeholder:"Phone",value:a.phone,onChange:r=>d("phone",r.target.value),autoComplete:"phone",className:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"})}),t.phone&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:t.phone})]})]}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-4"})]})}),e.jsxs("div",{className:"mt-10 lg:mt-0",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Order Summary"}),e.jsxs("div",{className:"mt-4 rounded-lg border border-gray-200 bg-white shadow-sm",children:[e.jsx("ul",{role:"list",className:"divide-y divide-gray-200",children:o.map(r=>e.jsx(F,{...r,updateQty:k},r.id))}),e.jsxs("dl",{className:"space-y-6 border-t border-gray-200 px-4 py-6 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-sm",children:"Subtotal"}),e.jsx("dd",{className:"text-sm font-medium text-gray-900",children:c(i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("dt",{className:"text-sm",children:["Taxes ",j]}),e.jsx("dd",{className:"text-sm font-medium text-gray-900",children:c(u)})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-6",children:[e.jsx("dt",{className:"text-base font-medium",children:"Total"}),e.jsx("dd",{className:"text-base font-medium text-gray-900",children:c(x)})]})]}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-6 sm:px-6",children:s?e.jsx("button",{type:"button",className:"w-full rounded-md border border-transparent bg-indigo-600 px-4 py-3 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50",children:"Loading..."}):e.jsx("button",{type:"submit",className:"w-full rounded-md border border-transparent bg-indigo-600 px-4 py-3 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50",children:"Confirm Order"})})]})]})]})]})})}S.layout=l=>e.jsx(_,{title:"Cart Detail",children:l});export{S as default};
